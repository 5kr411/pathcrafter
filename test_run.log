
> minebot@1.0.0 test
> jest --runInBand

PASS tests/integration/hoist_mining_integration.spec.js (10.995 s)
  integration: mining hoist applied post generation/filtering
    ✓ wooden_pickaxe: repeated log mining is hoisted into first occurrence (3025 ms)
    ✓ hoisting respects tool differences (4467 ms)

PASS tests/integration/aggregate_and_dedupe.spec.js
  integration: aggregate top-N and dedupe across generators
    ✓ wooden_pickaxe scenario produces duplicates across generators and dedupe removes them (1217 ms)
    ✓ aggregated paths are returned sorted by non-decreasing weight (1845 ms)

PASS tests/integration/behavior_generator_smelt.spec.js (12.43 s)
  integration: behavior_generator smelt
    ✓ creates behavior for a smelt leaf step from planner path (9576 ms)

PASS tests/unit/utils.spec.js (11.467 s)
  unit: helpers
    ✓ chooseMinimalToolName prefers lower tier (16 ms)
    ✓ renderName returns name as is (17 ms)
  unit: crafting table dependency
    ✓ shortest paths never use table before acquiring one (empty inventory) (3091 ms)
    ✓ lowest-weight paths never use table before acquiring one (empty inventory) (7705 ms)

PASS tests/integration/fuel_accounting.spec.js
  integration: fuel accounting for multiple smelts
    ✓ smelting 9 stone consumes >=2 coal units in a valid path (2598 ms)

PASS tests/integration/wooden_pickaxe.spec.js (6.976 s)
  integration: wooden_pickaxe with inventory
    ✓ shortest paths generator maintains length ordering (2177 ms)
    ✓ lowest weight generator maintains weight ordering (2242 ms)
    ✓ shortest paths includes expected optimal path (1818 ms)


<--- Last few GCs --->

[2371:0x7fd6f8040000]  1007285 ms: Scavenge 3491.2 (4126.8) -> 3476.6 (4127.5) MB, 7.2 / 0.0 ms  (average mu = 0.253, current mu = 0.254) allocation failure; 
[2371:0x7fd6f8040000]  1007342 ms: Scavenge 3491.7 (4127.5) -> 3477.2 (4128.0) MB, 7.0 / 0.0 ms  (average mu = 0.253, current mu = 0.254) allocation failure; 
[2371:0x7fd6f8040000]  1007400 ms: Scavenge 3492.4 (4128.0) -> 3477.9 (4128.8) MB, 7.4 / 0.0 ms  (average mu = 0.253, current mu = 0.254) allocation failure; 


<--- JS stacktrace --->

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
 1: 0x104407325 node::Abort() (.cold.1) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 2: 0x102d53a29 node::Abort() [/Users/jessebraun/minebot/node_modules/node/bin/node]
 3: 0x102d53c0f node::OOMErrorHandler(char const*, v8::OOMDetails const&) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 4: 0x102ee61a6 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, v8::OOMDetails const&) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 5: 0x1030d1c17 v8::internal::Heap::FatalProcessOutOfMemory(char const*) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 6: 0x1030d6861 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 7: 0x1030d2805 v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::internal::GarbageCollectionReason, char const*, v8::GCCallbackFlags) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 8: 0x1030cfb48 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [/Users/jessebraun/minebot/node_modules/node/bin/node]
 9: 0x1030c406f v8::internal::HeapAllocator::AllocateRawWithLightRetrySlowPath(int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment) [/Users/jessebraun/minebot/node_modules/node/bin/node]
10: 0x1030c4ab5 v8::internal::HeapAllocator::AllocateRawWithRetryOrFailSlowPath(int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment) [/Users/jessebraun/minebot/node_modules/node/bin/node]
11: 0x1030a59a2 v8::internal::Factory::NewFillerObject(int, v8::internal::AllocationAlignment, v8::internal::AllocationType, v8::internal::AllocationOrigin) [/Users/jessebraun/minebot/node_modules/node/bin/node]
12: 0x10352b9ac v8::internal::Runtime_AllocateInYoungGeneration(int, unsigned long*, v8::internal::Isolate*) [/Users/jessebraun/minebot/node_modules/node/bin/node]
13: 0x1039764b9 Builtins_CEntry_Return1_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit [/Users/jessebraun/minebot/node_modules/node/bin/node]
14: 0x10394683e Builtins_MapIteratorPrototypeNext [/Users/jessebraun/minebot/node_modules/node/bin/node]
